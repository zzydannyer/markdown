## 实用方法

### 首字母大写

```js
firstUpperCase(){
    let [first, ...rest] = this.dataType
    return first.toUpperCase() + rest.join('')
}
```

### 循环中使用异步

```js
function delayLog(item){
    return new Promise(resolve => {
        setTimeout(() = > resolve(item), 1000)
    })
}

function processArr(arr){
    arr.forEach(async item => {
        console.log(await delayLog(item))
    })
    console.log('打印完毕')
}
/*
打印完毕
...arr
*/

async function processArr(arr){
    for(let item of arr){
        console.log(await delayLog(item))
    }
    console.log('打印完毕')
}
/*
打印完毕
...arr
*/
```

* ES9` for await of`

```js
for await (const item of arr){}
```

### 动态添加类名

* 判断是否有这个类名

```js
hasClass(el,className){
    const reg = new RegExp('(^|\\s)'+ className +'(\\s|$)')  
    // \\s    /\s/ 空格
    // ^开头  |或  $结尾
	return reg.test(el.className)
}
```

```js
addClass(el,className){
    if(hasClass(el, className)){
        return;
    }

    let newClass = el.className.split(' ')    //Array
    newClass.push('className')
    newClass.join(' ')    //String
}

```



### ClassList方法

```js
Element.classList.length
Element.classList.contains('className')  //判断一个类型是不是存在，返回true和false
Element.classList.add('test')            //添加一个类名
Element.classList.remove('test')         //去掉一个类名
Element.classList.toggle('test')         //引号中的类名，有就删除，没有就添加

```

### 获取数组重复2次或者两次以上的元素

```js
let arr = [12,3,4,3,4,5,22,3,4,6,7,6,75,67,56,7,12];
let Arr = [];
let repArr = [];
for(let i = 0; i < arr.length; i++){
    if(Arr.indexOf(arr[i]) == -1){
        Arr.push(arr[i])
    }else{
        if(repArr.indexOf(arr[i]) == -1){
            repArr.push(arr[i])
        }
    }
}
```

### 递归拼接树形结构

```js
//树形菜单结构
const rootList = [
    { id:1,  parent:null, text:'菜单1' },
    { id:11, parent:1,    text:'菜单1-1' },
    { id:12, parent:1,    text:'菜单1-2' },
    { id:2,  parent:null, text:'菜单2' },
    { id:21, parent:2,    text:'菜单2-1' }
]

function getTreeList(rootList, id, list){
    for(let item of rootList){
        if(item.parent == id){
            list.push(item)
        }
    }
    
    for(let i of list){
        i.children = []
        
        getTreeList(rootList, i.id, i.children)
            
        if(i.children.length == 0){
            delete i.children
        }
    }
    
    return list
}

const res = getTreeList(rootList, null, [])

/**
 [
 	{
 		id: 1,
		parent: null,
		text: "菜单1",
		children: [
			{
				id: 11
				parent: 1
				text: "菜单1-1"
			},
			{
				id: 12
				parent: 1
				text: "菜单1-2"
			}
		]
 	},
 	{
 		id: 2,
		parent: null,
		text: "菜单2",
		children: [
			{
				id: 21
                parent: 2
                text: "菜单2-1"
			}
		]
 	}
 ]
 */
```

### newSet解构

```js
var arr = new Set([1,2,3,4,5])
[...arr][arr.size-1]
```

#### **触屏即播放**

```javascript
$('html').one('touchstart',function(){  
 audio.play()  
})
```

#### **获取数组重复2次或者两次以上的元素**

```js
let arr = [12,3,4,3,4,5,22,3,4,6,7,6,75,67,56,7,12];
let Arr = [];
let repArr = [];
for(let i = 0; i < arr.length; i++){
    if(Arr.indexOf(arr[i]) == -1){
        Arr.push(arr[i])
    }else{
        if(repArr.indexOf(arr[i]) == -1){
            repArr.push(arr[i])
        }
    }
}
```
